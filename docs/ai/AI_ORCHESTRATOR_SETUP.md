# AI Orchestrator - Complete Setup Guide

## ğŸ‰ What's Been Built

A **fully functional AI Agent/Orchestrator** embedded in the dashboard that provides:

### âœ… Core Features
1. **Memory Recall** - Semantic search through vector storage
2. **Workflow Creation** - AI-powered multi-step planning
3. **Context Storage** - Persistent memory across sessions
4. **Personalization** - User profile-based responses
5. **MCP Integration** - Connect to personal productivity tools
6. **Cross-Platform** - Works across CLI, dashboard, API, SDK, IDE extensions

---

## ğŸ“ File Structure

```
/apps/dashboard/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ memory-sdk/              â† Memory Client (copied from base SDK)
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ enhanced-client.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard-adapter.ts  â† Dashboard-specific wrapper
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ai-orchestrator/          â† AI Orchestrator Core
â”‚   â”‚       â””â”€â”€ core.ts               â† Main AI engine
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useMemoryClient.tsx       â† Memory hook
â”‚   â”‚   â””â”€â”€ useAIOrchestrator.tsx     â† AI orchestrator hook
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ ai/
â”‚   â”‚       â””â”€â”€ AIAssistant.tsx       â† Floating chat interface
â”‚   â”‚
â”‚   â””â”€â”€ App.tsx                       â† AI Assistant integrated here
```

---

## ğŸ§  Architecture Overview

```mermaid
graph TD
    A[User] --> B[AI Assistant Chat UI]
    B --> C[AI Orchestrator Core]
    C --> D[Memory Client SDK]
    C --> E[MCP Tools]
    C --> F[User Profile]

    D --> G[Vector Storage - Supabase]
    E --> H[GitHub]
    E --> I[Slack]
    E --> J[ClickUp]
    E --> K[Other Tools]

    C --> L[Workflow Planner]
    L --> M[Action Executor]

    style C fill:#4f46e5
    style D fill:#10b981
    style E fill:#f59e0b
```

---

## ğŸš€ How It Works

### 1. **User Sends Message**
```typescript
// User types: "Create a workflow to analyze Q3 sales data"
const { sendMessage } = useAIOrchestrator();
await sendMessage("Create a workflow to analyze Q3 sales data");
```

### 2. **AI Orchestrator Processes**
```typescript
// core.ts - processRequest()
1. Recall relevant memories (semantic search)
2. Detect intent (workflow creation)
3. Generate multi-step plan
4. Store conversation context
5. Return response + workflow
```

### 3. **Memory Integration**
```typescript
// Searches vector storage for relevant context
const memories = await memoryClient.search({
  query: userInput,
  limit: 10,
  threshold: 0.7
});

// Uses memories to enhance response
```

### 4. **Workflow Creation**
```typescript
// Creates structured workflow plan
{
  id: "wf_123",
  goal: "Analyze Q3 sales data",
  steps: [
    { label: "Gather data", tool: "database" },
    { label: "Analyze trends", tool: "analytics" },
    { label: "Create report", tool: "documents" }
  ],
  usedMemories: ["mem_1", "mem_2"]
}
```

---

## ğŸ”Œ MCP Integration (Personal Tools)

### Connecting User's Tools

The AI orchestrator can connect to personal productivity tools via MCP:

```typescript
// lib/ai-orchestrator/mcp-connector.ts (TO BE CREATED)

import mcpServers from '@/config/mcp-servers.json';

export class MCPConnector {
  async executeAction(tool: string, action: string, params: any) {
    // Execute actions via MCP tools
    // Examples:
    // - GitHub: Create issue, commit code
    // - ClickUp: Create task, update status
    // - Slack: Send message, create channel
    // - Notion: Create page, update database
  }
}
```

### Example MCP Actions

```typescript
// Create GitHub issue
await mcp.executeAction('github', 'create-issue', {
  title: 'Bug fix needed',
  body: 'Details from AI analysis...'
});

// Create ClickUp task
await mcp.executeAction('clickup', 'create-task', {
  name: 'Q3 Report',
  description: 'Generated by AI orchestrator'
});

// Send Slack message
await mcp.executeAction('slack', 'send-message', {
  channel: '#team',
  text: 'Workflow completed!'
});
```

---

## ğŸ’¾ Persistent Memory Across Platforms

### Cross-Platform Session Management

```typescript
// Shared memory across:
// - Dashboard (web)
// - CLI tools
// - IDE extensions (VSCode, Cursor, Windsurf)
// - Web extensions
// - Mobile apps

// All platforms use the same memory API
const memoryClient = new MemoryClient({
  apiUrl: 'https://api.lanonasis.com/memory',
  apiKey: userToken
});

// Store context
await memoryClient.create({
  title: 'User preference',
  content: 'Always use TypeScript for new projects',
  type: 'personal',
  tags: ['preference', 'typescript']
});

// Retrieve across any platform
const memories = await memoryClient.search({
  query: 'typescript preferences'
});
```

### Session Sync

```typescript
// lib/ai-orchestrator/session-sync.ts (TO BE CREATED)

export class SessionSync {
  // Sync conversation history across devices
  async syncSession(sessionId: string) {
    // Upload local session to cloud
    // Download latest from cloud
    // Merge conversations
  }

  // Continue conversation on different platform
  async resumeSession(sessionId: string) {
    // Fetch conversation history
    // Restore AI context
    // Continue where user left off
  }
}
```

---

## ğŸ¨ UI/UX Features

### Floating AI Assistant

```typescript
// Always accessible via floating button
<AIAssistant />

// Features:
- Minimize/maximize
- Persistent across page navigation
- Auto-saves conversation
- Suggested actions
- Real-time typing indicators
```

### Chat Interface

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ§  AI Assistant        [-][x]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚ User: Create a workflow         â”‚
â”‚       for Q3 analysis          â”‚
â”‚                                 â”‚
â”‚ AI: I've created a 3-step      â”‚
â”‚     workflow. Here's the plan: â”‚
â”‚     1. Gather Q3 data          â”‚
â”‚     2. Analyze trends          â”‚
â”‚     3. Generate report         â”‚
â”‚                                 â”‚
â”‚ [Try asking:]                   â”‚
â”‚ â€¢ Execute workflow             â”‚
â”‚ â€¢ Tell me more                 â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ask me anything... [Send]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Configuration Required

### Environment Variables

```bash
# .env
VITE_MEMORY_API_URL=https://api.lanonasis.com/memory
VITE_ANTHROPIC_API_KEY=sk-ant-xxx  # For AI processing
VITE_OPENAI_API_KEY=sk-xxx         # For embeddings
```

### MCP Configuration

```json
// config/mcp-servers.json
{
  "mcpServers": {
    "github": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-github"],
      "env": {
        "GITHUB_PERSONAL_ACCESS_TOKEN": "ghp_xxx"
      }
    },
    "clickup": {
      "command": "npx",
      "args": ["-y", "clickup-mcp"],
      "env": {
        "CLICKUP_API_KEY": "pk_xxx"
      }
    }
  }
}
```

---

## ğŸ“Š Usage Examples

### Example 1: Create Workflow

```typescript
const { createWorkflow } = useAIOrchestrator();

const workflow = await createWorkflow(
  "Analyze our API usage and create optimization report"
);

// Returns:
{
  steps: [
    { label: "Fetch API logs", tool: "database" },
    { label: "Analyze patterns", tool: "analytics" },
    { label: "Generate report", tool: "documents" }
  ],
  usedMemories: ["mem_api_docs", "mem_optimization_tips"]
}
```

### Example 2: Store Context

```typescript
const { storeContext } = useAIOrchestrator();

await storeContext(
  "Our deployment schedule is every Friday at 5 PM PST"
);

// Later, AI will recall this automatically when relevant
```

### Example 3: Ask Questions

```typescript
const { askQuestion } = useAIOrchestrator();

const answer = await askQuestion(
  "What's our deployment schedule?"
);

// Returns: "Based on what I remember, your deployment
//           schedule is every Friday at 5 PM PST."
```

---

## ğŸ¯ Next Steps

### Phase 1: Core (âœ… Complete)
- âœ… AI Orchestrator Core Engine
- âœ… Memory Client Integration
- âœ… Chat UI
- âœ… Dashboard Integration

### Phase 2: MCP Integration (In Progress)
- ğŸ”„ Connect MCP tools
- ğŸ”„ Personal tool authentication
- â³ Action execution framework

### Phase 3: Cross-Platform (Pending)
- â³ Session sync across devices
- â³ CLI integration
- â³ IDE extension support
- â³ Web extension bridge

### Phase 4: Enhancements (Pending)
- â³ Voice input/output
- â³ Proactive suggestions
- â³ Workflow templates
- â³ Team collaboration

---

## ğŸš€ Launch Checklist

Before going live:

- [ ] Set up memory API endpoint
- [ ] Configure AI API keys (Anthropic/OpenAI)
- [ ] Test MCP tool connections
- [ ] Verify Supabase auth integration
- [ ] Test cross-browser compatibility
- [ ] Set up error monitoring
- [ ] Create user onboarding flow

---

## ğŸ“– API Reference

See individual files for detailed API documentation:
- `lib/ai-orchestrator/core.ts` - Core AI engine
- `lib/memory-sdk/dashboard-adapter.ts` - Memory operations
- `hooks/useAIOrchestrator.tsx` - React hook API
- `components/ai/AIAssistant.tsx` - UI component

---

**ğŸ‰ Your AI Orchestrator is ready to help users across the entire platform!**
